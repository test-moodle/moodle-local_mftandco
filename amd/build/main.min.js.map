{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * Put together the stuff for the local_mft.\n *\n * #package     local_mft\n * @category    x\n * @copyright   2023 Mofet Institute {@link https://macam.ac.il}\n * @author      Mofet Institute {@link https://macam.ac.il}\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/*var mftGlobals = {'carouselOnFront': null, 'carouselOnMy': null};*/\n\ndefine([\n    'jquery',\n    'core/ajax',\n    //'core/notification',\n], function ($, ajax) {\n\n    'use strict';\n\n    /**\n     * Initialize the relevant listeners.\n     */\n    const init = () => {\n        addMftAndCoCode_new();\n    };\n\n    const addMftAndCoCode_new = () => {\n        if (document.querySelector(\"footer#page-footer\") !== null) {\n            let request = {\n                methodname: 'local_mftandco_getMftAndCoCode',\n                args: [],\n            };\n            // .fail(notification.exception)\n            return ajax.call([request], true, false)[0].then((data) => {\n                if (true === data.hasOwnProperty('MftAndCoCode')) {\n                    let oMftAndCoData = JSON.parse(data.MftAndCoCode),\n                        oMftAndCoObject = new DOMParser().parseFromString(oMftAndCoData.link, \"text/html\"),\n                        oFooterobj = document.querySelector(\"head\");\n                    oFooterobj.insertAdjacentHTML('beforeend', oMftAndCoObject.documentElement.textContent);\n                    let sSrcMatch = oMftAndCoObject.documentElement.textContent.match(/<script[^>]*src=\"([^\"]*)\"[^>]*>/);\n                    if (sSrcMatch !== null && sSrcMatch[1] !== null) {\n                        $.getScript(sSrcMatch[1]);\n                    }\n                }\n\n                if (true === data.hasOwnProperty('MftAndCoUrl')) {\n                    let oMftAndCoData = JSON.parse(data.MftAndCoUrl),\n                        oMftAndCoObject = new DOMParser().parseFromString(oMftAndCoData.url, \"text/html\"),\n                        oFooterobj = document.querySelector(\"head\");\n                    oFooterobj.insertAdjacentHTML('beforeend', oMftAndCoObject.documentElement.textContent);\n                    let sSrcMatch = oMftAndCoObject.documentElement.textContent.match(/<script[^>]*src=\"([^\"]*)\"[^>]*>/);\n                    if (sSrcMatch !== null && sSrcMatch[1] !== null) {\n                        $.getScript(sSrcMatch[1]);\n                    }\n                }\n            });\n        }\n    };\n\n    return {\n        // Module exports.\n        init: init\n    };\n});\n"],"names":["define","$","ajax","addMftAndCoCode_new","document","querySelector","request","methodname","args","call","then","data","hasOwnProperty","oMftAndCoData","JSON","parse","MftAndCoCode","oMftAndCoObject","DOMParser","parseFromString","link","insertAdjacentHTML","documentElement","textContent","sSrcMatch","match","getScript","MftAndCoUrl","url","init"],"mappings":";;;;;;;;;AA2BAA,6BAAO,CACH,SACA,cAED,SAAUC,EAAGC,YAWNC,oBAAsB,QAC6B,OAAjDC,SAASC,cAAc,sBAAgC,KACnDC,QAAU,CACVC,WAAY,iCACZC,KAAM,WAGHN,KAAKO,KAAK,CAACH,UAAU,GAAM,GAAO,GAAGI,MAAMC,WAC1C,IAASA,KAAKC,eAAe,gBAAiB,KAC1CC,cAAgBC,KAAKC,MAAMJ,KAAKK,cAChCC,iBAAkB,IAAIC,WAAYC,gBAAgBN,cAAcO,KAAM,aACzDhB,SAASC,cAAc,QAC7BgB,mBAAmB,YAAaJ,gBAAgBK,gBAAgBC,iBACvEC,UAAYP,gBAAgBK,gBAAgBC,YAAYE,MAAM,mCAChD,OAAdD,WAAuC,OAAjBA,UAAU,IAChCvB,EAAEyB,UAAUF,UAAU,QAI1B,IAASb,KAAKC,eAAe,eAAgB,KACzCC,cAAgBC,KAAKC,MAAMJ,KAAKgB,aAChCV,iBAAkB,IAAIC,WAAYC,gBAAgBN,cAAce,IAAK,aACxDxB,SAASC,cAAc,QAC7BgB,mBAAmB,YAAaJ,gBAAgBK,gBAAgBC,iBACvEC,UAAYP,gBAAgBK,gBAAgBC,YAAYE,MAAM,mCAChD,OAAdD,WAAuC,OAAjBA,UAAU,IAChCvB,EAAEyB,UAAUF,UAAU,gBAOnC,CAEHK,KAvCS,KACT1B"}